<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سورة الكهف</title>
        <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-202T10BQ0B"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-202T10BQ0B');
</script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Light gray background */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to top */
            min-height: 100vh;
            padding: 2rem 0;
            transition: background-color 0.3s ease, color 0.3s ease; /* Smooth transition for dark mode */
        }
        .amiri-font {
            font-family: 'Amiri', serif;
            line-height: var(--amiri-line-height, 2.5); /* Use CSS variable for line height */
            font-size: var(--amiri-font-size, 2rem); /* Use CSS variable for font size */
            transition: font-size 0.2s ease, line-height 0.2s ease; /* Smooth transition for font size and line height */
        }
        .verse-container {
            border-bottom: 1px solid #e5e7eb; /* Light border between verses */
            padding-bottom: 1.5rem;
            margin-bottom: 1.5rem;
            transition: border-color 0.3s ease, background-color 0.3s ease; /* Smooth transition for dark mode */
            background-color: #fcfcfc; /* Very light gray for verse background */
            border-radius: 0.75rem; /* Rounded corners for the verse container */
            padding: 1.5rem; /* Increased padding inside the verse container */
        }
        .verse-container:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        .tafsir-content {
            background-color: #f9fafb; /* Lighter gray for tafsir background */
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
            border: 1px solid #e5e7eb;
            font-size: 0.95rem;
            color: #4b5563; /* Gray-700 */
            line-height: 1.8;
            position: relative; /* For close button positioning */
            transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease; /* Smooth transition for dark mode */
        }
        .tafsir-close-btn {
            position: absolute;
            top: 0.5rem;
            left: 0.5rem; /* Adjusted for RTL */
            background-color: #ef4444; /* Red-500 */
            color: white;
            border: none;
            border-radius: 9999px; /* Full rounded */
            width: 24px; /* w-6 */
            height: 24px; /* h-6 */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.875rem; /* text-sm */
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .tafsir-close-btn:hover {
            background-color: #dc2626; /* Red-600 */
        }
        /* Custom message box styles */
        .message-box-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .message-box {
            background-color: white;
            padding: 2rem;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1); /* shadow-lg */
            max-width: 90%;
            width: 400px;
            text-align: center;
        }
        .message-box-content {
            margin-bottom: 1.5rem;
            font-size: 1.125rem; /* text-lg */
            color: #374151; /* text-gray-700 */
        }
        .message-box-button {
            background-color: #4f46e5; /* indigo-600 */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem; /* rounded-lg */
            font-weight: 600; /* font-semibold */
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .message-box-button:hover {
            background-color: #4338ca; /* indigo-700; */
        }
        /* Pastel colors for tafsir buttons */
        .btn-pastel-blue { background-color: #a7d9f7; color: #1f2937; } /* light blue */
        .btn-pastel-blue:hover { background-color: #8acbe5; }
        .btn-pastel-green { background-color: #b2f0c8; color: #1f2937; } /* light green */
        .btn-pastel-green:hover { background-color: #92e0ac; }
        .btn-pastel-purple { background-color: #d8b2f0; color: #1f2937; } /* light purple */
        .btn-pastel-purple:hover { background-color: #c092e0; }
        .btn-pastel-orange { background-color: #f7d9a7; color: #1f2937; } /* light orange */
        .btn-pastel-orange:hover { background-color: #e5c08a; }
        .btn-pastel-red { background-color: #ffb2b2; color: #1f2937; } /* light red */
        .btn-pastel-red:hover { background-color: #e59999; }
        .btn-pastel-teal { background-color: #b2f0e0; color: #1f2937; } /* light teal */
        .btn-pastel-teal:hover { background-color: #92e0cc; }
        .btn-pastel-pink { background-color: #f0b2d8; color: #1f2937; } /* light pink */
        .btn-pastel-pink:hover { background-color: #e092c0; }


        /* Dark Mode Styles */
        body.dark-mode {
            background-color: #1a202c; /* Dark background */
            color: #e2e8f0; /* Light text */
        }
        body.dark-mode .container {
            background-color: #2d3748; /* Darker container */
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.3);
        }
        body.dark-mode .text-gray-900 {
            color: #e2e8f0; /* Light text for verse */
        }
        body.dark-mode .text-gray-800 {
            color: #cbd5e0; /* Lighter gray for general text */
        }
        body.dark-mode .text-gray-500 {
            color: #a0aec0; /* Even lighter gray */
        }
        body.dark-mode .verse-container {
            border-color: #4a5568; /* Darker border */
            background-color: #2c3541; /* Darker background for verse in dark mode */
        }
        body.dark-mode .tafsir-content {
            background-color: #4a5568; /* Darker tafsir background */
            border-color: #616e7f;
            color: #e2e8f0;
        }
        body.dark-mode .tafsir-close-btn {
            background-color: #ef4444; /* Keep red for close */
        }
        body.dark-mode .message-box {
            background-color: #2d3748;
            color: #e2e8f0;
        }
        body.dark-mode .message-box-content {
            color: #e2e8f0;
        }
        body.dark-mode .bg-gray-200 {
            background-color: #4a5568;
            color: #e2e8f0;
        }
        body.dark-mode .bg-gray-200:hover {
            background-color: #616e7f;
        }
        /* Adjusted tafsir button text color for dark mode to be readable */
        body.dark-mode .btn-pastel-blue,
        body.dark-mode .btn-pastel-green,
        body.dark-mode .btn-pastel-purple,
        body.dark-mode .btn-pastel-orange,
        body.dark-mode .btn-pastel-red,
        body.dark-mode .btn-pastel-teal,
        body.dark-mode .btn-pastel-pink {
            color: #e2e8f0; /* Light text for pastel buttons in dark mode, ensures readability */
        }

        /* Back to Top Button and Utility Buttons */
        .utility-buttons-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 101; /* Higher z-index to be on top of the menu */
        }
        .utility-btn {
            background-color: #6b7280; /* Gray-500 */
            color: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: background-color 0.2s ease, transform 0.2s ease;
        }
        .utility-btn:hover {
            background-color: #4b5563; /* Gray-600 */
            transform: translateY(-1px);
        }
        body.dark-mode .utility-btn {
            background-color: #4a5568; /* Darker gray in dark mode */
        }
        body.dark-mode .utility-btn:hover {
            background-color: #616e7f;
        }

        /* Specific style for Back to Top button to control its display */
        #backToTopBtn {
            display: none; /* Hidden by default, controlled by JS */
            position: fixed; /* Fixed position */
            bottom: 20px; /* Place at the bottom */
            right: 20px; /* Place at the right */
            z-index: 99; /* Make sure it's on top, slightly lower than menu toggle */
        }

        /* Side Menu Styles */
        .side-menu {
            position: fixed;
            top: 0;
            right: -250px; /* Initially hidden off-screen to the right */
            width: 250px;
            height: 100vh;
            background-color: #ffffff; /* White background */
            box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
            transition: right 0.3s ease-in-out;
            z-index: 100; /* Lower than toggle button, higher than content */
            padding: 2rem 1rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            align-items: flex-start;
        }
        .side-menu.open {
            right: 0; /* Slide in */
        }
        body.dark-mode .side-menu {
            background-color: #2d3748; /* Darker background in dark mode */
            box-shadow: -2px 0 10px rgba(0, 0, 0, 0.3);
        }
        .side-menu .menu-item-btn {
            width: 100%;
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem 1rem;
            background-color: #e5e7eb; /* Light gray */
            color: #374151; /* Dark gray text */
            border-radius: 0.5rem;
            font-weight: 500;
            transition: background-color 0.2s ease;
            cursor: pointer;
        }
        .side-menu .menu-item-btn:hover {
            background-color: #d1d5db; /* Darker light gray on hover */
        }
        body.dark-mode .side-menu .menu-item-btn {
            background-color: #4a5568; /* Darker gray in dark mode */
            color: #e2e8f0; /* Light text */
        }
        body.dark-mode .side-menu .menu-item-btn:hover {
            background-color: #616e7f;
        }

        .button-icon {
            margin-left: 0.5rem; /* Space between icon and text for RTL */
        }
        .basmala {
            font-size: 1.5rem; /* Changed to 1.5rem for 2xl */
            margin-top: 1rem;
            margin-bottom: 2rem;
            color: #4a5568; /* Slightly darker gray for contrast */
            transition: color 0.3s ease;
        }
        body.dark-mode .basmala {
            color: #cbd5e0; /* Lighter color in dark mode */
        }

        /* Bookmark Highlight - Updated colors for better visibility */
        .verse-bookmarked {
            background-color: #fef9c3; /* A more visible light yellow (yellow-100) */
            border: 1px solid #facc15; /* A more prominent yellow border (yellow-400) */
            padding: 1rem;
            border-radius: 0.75rem;
            margin-bottom: 1.5rem;
        }
        body.dark-mode .verse-bookmarked {
            background-color: #78350f; /* A darker, but distinct, yellow/orange (amber-900) */
            border-color: #d97706; /* Still a prominent orange border (amber-700) */
        }
    </style>
</head>
<body class="antialiased">
    <div class="utility-buttons-container">
        <button id="moreOptionsBtn" class="utility-btn" title="المزيد من الخيارات">
            <i class="fas fa-ellipsis-v"></i>
        </button>
    </div>

    <div id="sideMenu" class="side-menu">
        <h2 class="text-xl font-bold text-gray-800 mb-4">خيارات القراءة</h2>
        
        <button id="decreaseFontSizeBtn" class="menu-item-btn" title="تصغير الخط">
            <i class="fas fa-magnifying-glass-minus"></i>
            <span>تصغير الخط</span>
        </button>
        <button id="increaseFontSizeBtn" class="menu-item-btn" title="تكبير الخط">
            <i class="fas fa-magnifying-glass-plus"></i>
            <span>تكبير الخط</span>
        </button>
        <button id="darkModeToggle" class="menu-item-btn" title="الوضع الليلي/النهاري">
            <i class="fas fa-moon"></i>
            <span>الوضع الليلي/النهاري</span>
        </button>
    </div>

    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-4xl bg-white rounded-xl shadow-lg">
        <h1 class="text-3xl sm:text-4xl font-bold text-center text-gray-800 mb-2 amiri-font">سورة الكهف</h1>
        <p class="text-center amiri-font basmala">﷽</p>

        <div id="surah-content">
            </div>

        <div id="messageBoxOverlay" class="message-box-overlay hidden">
            <div class="message-box">
                <p id="messageBoxContent" class="message-box-content"></p>
                <button id="messageBoxClose" class="message-box-button">إغلاق</button>
            </div>
        </div>
    </div>

    <button onclick="scrollToTop()" id="backToTopBtn" class="utility-btn" title="العودة للأعلى">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script>
        // Function to show a custom message box
        function showMessageBox(message) {
            const overlay = document.getElementById('messageBoxOverlay');
            const content = document.getElementById('messageBoxContent');
            const closeButton = document.getElementById('messageBoxClose');

            content.textContent = message;
            overlay.classList.remove('hidden');

            closeButton.onclick = () => {
                overlay.classList.add('hidden');
            };

            // Close when clicking outside the box
            overlay.onclick = (event) => {
                if (event.target === overlay) {
                    overlay.classList.add('hidden');
                }
            };
        }

        // Sample data for Surah Al-Kahf verses with placeholder tafsir texts
        // ** تم تحديث النصوص لأول 10 آيات بدقة من موقع مشروع الملك سعود لتعظيم القرآن الكريم **
        const verses = [
            {
                number: 1,
                text: "الْحَمْدُ لِلَّهِ الَّذِي أَنزَلَ عَلَىٰ عَبْدِهِ الْكِتَابَ وَلَمْ يَجْعَل لَّهُ عِوَجًا ۜ",
                tafsir: {
                    mukhtasar: "الثناء كله لله الذي أنزل على عبده ورسوله محمد صلى الله عليه وسلم هذا القرآن، ولم يجعل فيه اعوجاجًا ولا انحرافًا.",
                    ibnKathir: "يخبر تعالى عن نفسه الكريمة بأنه المستحق لجميع المحامد، لأنه أنزل على عبده ورسوله محمد صلى الله عليه وسلم هذا الكتاب العظيم، وهو القرآن الكريم، الذي لا اعوجاج فيه ولا ميل، بل هو مستقيم لا لبس فيه ولا غموض.",
                    saadi: "يثني تعالى على نفسه الكريمة، بإنزاله هذا الكتاب العظيم، على عبده ورسوله محمد صلى الله عليه وسلم، الذي جعله مستقيماً، لا عوج فيه، ولا ميل عن الحق، بل هو قيم، مستقيم، مهتدٍ، يدعو إلى كل خير، وينهى عن كل شر.",
                    tabari: "القول في تأويل قوله تعالى: ﴿الْحَمْدُ لِلَّهِ الَّذِي أَنزَلَ عَلَىٰ عَبْدِهِ الْكِتَابَ وَلَمْ يَجْعَل لَّهُ عِوَجًا﴾ يعني: الشكر الكامل لله الذي أنزل على عبده محمد صلى الله عليه وسلم القرآن، ولم يجعل فيه اعوجاجاً عن الحق، بل جعله مستقيماً لا لبس فيه ولا غموض، لا زيغ فيه ولا ميل، لئلا يزيغ من اتبعه عن الحق.",
                    baghawi: "قوله عز وجل: ﴿الْحَمْدُ لِلَّهِ الَّذِي أَنزَلَ عَلَىٰ عَبْدِهِ الْكِتَابَ﴾ يعني: القرآن، ﴿وَلَمْ يَجْعَل لَّهُ عِوَجًا﴾ أي: لم يجعل فيه اختلافاً ولا تناقضاً.",
                    qurtubi: "قوله تعالى: ﴿الْحَمْدُ لِلَّهِ الَّذِي أَنزَلَ عَلَىٰ عَبْدِهِ الْكِتَابَ﴾ أي: القرآن، وهو كلام الله غير مخلوق، أنزله على عبده محمد صلى الله عليه وسلم. ﴿وَلَمْ يَجْعَل لَّهُ عِوَجًا﴾ أي: لم يجعل فيه ميلاً عن الحق، ولا زيغاً عن الاستقامة، ولا شكاً ولا شبهة.",
                    tadabbur: "تأمل كيف يبدأ الله تعالى السورة بالحمد لنفسه، وذلك لأنه المنعم المتفضل بإنزال هذا الكتاب الذي هو هداية ونور، وكيف وصف الكتاب بأنه لا اعوجاج فيه، مما يدل على كماله وشموليته."
                }
            },
            {
                number: 2,
                text: "قَيِّمًا لِّيُنذِرَ بَأْسًا شَدِيدًا مِّن لَّدُنْهُ وَيُبَشِّرَ الْمُؤْمِنِينَ الَّذِينَ يَعْمَلُونَ الصَّالِحَاتِ أَنَّ لَهُمْ أَجْرًا حَسَنًا",
                tafsir: {
                    mukhtasar: "جعله مستقيمًا معتدلًا، ليُنذِر بهذا القرآنِ بأسًا شديدًا وعذابًا عاجلًا وآجلًا مِن عند اللهِ للكافرين به، وليُبَشِّر المؤمنين الذين يعملون الصالحات بأن لهم ثوابًا حسنًا وهو الجنة.",
                    ibnKathir: "أي: جعله قيما مستقيما معتدلا، ﴿لينذر بأسا شديدا من لدنه﴾ أي: من عند الله، عقوبة عاجلة وآجلة في الدنيا والآخرة لمن خالفه وكذب به، ﴿ويبشر المؤمنين الذين يعملون الصالحات﴾ أي: بالإيمان مع الأعمال الصالحة، ﴿أن لهم أجرا حسنا﴾ وهو الجنة.",
                    saadi: "﴿قَيِّمًا﴾ أي: مستقيمًا في ألفاظه ومعانيه، لا نقص فيه ولا خلل، ﴿لِيُنْذِرَ﴾ به ﴿بَأْسًا شَدِيدًا مِنْ لَدُنْهُ﴾ أي: عذابًا شديدًا من عنده، ﴿وَيُبَشِّرَ الْمُؤْمِنِينَ الَّذِينَ يَعْمَلُونَ الصَّالِحَاتِ أَنَّ لَهُمْ أَجْرًا حَسَنًا﴾.",
                    tabari: "﴿قَيِّمًا﴾ يعني: مستقيماً، لا عوج فيه ولا أمت. ﴿لِيُنْذِرَ بَأْسًا شَدِيدًا مِّن لَّدُنْهُ﴾ يعني: عذاباً شديداً من عنده، ﴿وَيُبَشِّرَ الْمُؤْمِنِينَ الَّذِينَ يَعْمَلُونَ الصَّالِحَاتِ أَنَّ لَهُمْ أَجْرًا حَسَنًا﴾ وهو الجنة.",
                    baghawi: "﴿قَيِّماً﴾ أي: مستقيماً، ﴿لِّيُنذِرَ بَأْسًا شَدِيدًا مِّن لَّدُنْهُ﴾ أي: عذاباً شديداً من قبله، ﴿وَيُبَشِّرَ الْمُؤْمِنِينَ الَّذِينَ يَعْمَلُونَ الصَّالِحَاتِ أَنَّ لَهُمْ أَجْرًا حَسَنًا﴾ وهو الجنة.",
                    qurtubi: "﴿قَيِّماً﴾ أي: مستقيماً لا عوج فيه ولا أمت، ﴿لِّيُنذِرَ بَأْسًا شَدِيدًا مِّن لَّدُنْهُ﴾ أي: عذاباً شديداً من عنده، ﴿وَيُبَشِّرَ الْمُؤْمِنِينَ الَّذِينَ يَعْمَلُونَ الصَّالِحَاتِ أَنَّ لَهُمْ أَجْرًا حَسَنًا﴾ وهو الجنة.",
                    tadabbur: "لاحظ التوازن بين الإنذار والتبشير في القرآن. فهو لا يقتصر على التخويف، بل يفتح باب الأمل والرجاء للمؤمنين العاملين للصالحات، مما يحفز على العمل الصالح."
                }
            },
            {
                number: 3,
                text: "مَّاكِثِينَ فِيهِ أَبَدًا",
                tafsir: {
                    mukhtasar: "ماكثين في هذا الأجر الحسن وهو الجنة أبدًا، لا يزول عنهم، ولا ينقطع.",
                    ibnKathir: "﴿مَّاكِثِينَ فِيهِ أَبَدًا﴾ أي: في هذا الأجر الحسن، وهو الجنة، ماكثين فيه أبداً لا يزولون ولا يتحولون.",
                    saadi: "﴿مَّاكِثِينَ فِيهِ أَبَدًا﴾ أي: دائمين في هذا الأجر، وهو الجنة، لا يخرجون منها أبدًا.",
                    tabari: "﴿مَّاكِثِينَ فِيهِ أَبَدًا﴾ أي: مقيمين في هذا الأجر الحسن الذي وعدهم الله به أبدا، لا يزول عنهم ولا يحول.",
                    baghawi: "﴿مَّاكِثِينَ فِيهِ أَبَدًا﴾ أي: مقيمين في الأجر الحسن أبدا لا يخرجون منه.",
                    qurtubi: "﴿مَّاكِثِينَ فِيهِ أَبَدًا﴾ أي: دائمين في هذا الأجر الحسن، وهو الجنة، لا يخرجون منها أبدا.",
                    tadabbur: "كلمة 'أبدًا' تؤكد على خلود النعيم للمؤمنين، وهذا يزيد من قيمة الأجر ويشجع على الاستقامة والثبات على الطاعات."
                }
            },
            {
                number: 4,
                text: "وَيُنذِرَ الَّذِينَ قَالُوا اتَّخَذَ اللَّهُ وَلَدًا",
                tafsir: {
                    mukhtasar: "وينذر بهذا القرآن أيضًا الذين زعموا أن الله اتخذ ولدًا كاليهود والنصارى والمشركين.",
                    ibnKathir: "أي: وينذر بهذا القرآن أيضاً الذين قالوا زوراً وبهتاناً إن الله اتخذ ولداً، كاليهود والنصارى والمشركين.",
                    saadi: "﴿وَيُنْذِرَ الَّذِينَ قَالُوا اتَّخَذَ اللَّهُ وَلَدًا﴾ من اليهود والنصارى والمشركين، فكل منهم زعم أن لله ولدًا، تعالى الله عن قولهم علوًّا كبيرًا.",
                    tabari: "﴿وَيُنْذِرَ الَّذِينَ قَالُوا اتَّخَذَ اللَّهُ وَلَدًا﴾ وهم اليهود والنصارى والمشركون الذين زعموا لله ولداً.",
                    baghawi: "﴿وَيُنذِرَ الَّذِينَ قَالُوا اتَّخَذَ اللَّهُ وَلَدًا﴾ يعني اليهود والنصارى والمشركين.",
                    qurtubi: "قوله تعالى: ﴿وَيُنْذِرَ الَّذِينَ قَالُوا اتَّخَذَ اللَّهُ وَلَدًا﴾ أي: وهم اليهود والنصارى والمشركون."
                }
            },
            {
                number: 5,
                text: "مَّا لَهُم بِهِ مِنْ عِلْمٍ وَلَا لِآبَائِهِمْ ۚ كَبُرَتْ كَلِمَةً تَخْرُجُ مِنْ أَفْوَاهِهِمْ ۚ إِن يَقُولُونَ إِلَّا كَذِبًا",
                tafsir: {
                    mukhtasar: "ليس لهم بما قالوه عن الله من اتخاذه ولدًا علم صحيح، ولا كان لآبائهم الذين قلدوهم في هذا القول علم بذلك. عظمت كلمة تخرج من أفواههم ما أقبحها! فما يقولونه إلا كذبًا وافتراءً.",
                    ibnKathir: "أي: ما لهؤلاء الذين قالوا ذلك، ولا لآبائهم الذين قلدوهم فيه، من علم صحيح يدل على ما قالوه، بل هو قول باطل لا أساس له. ﴿كَبُرَتْ كَلِمَةً تَخْرُجُ مِنْ أَفْوَاهِهِمْ﴾ أي: عظمت هذه الكلمة الشنيعة التي تخرج من أفواههم، ﴿إِن يَقُولُونَ إِلَّا كَذِبًا﴾ أي: ما يقولون إلا كذباً وافتراءً على الله.",
                    saadi: "﴿مَّا لَهُم بِهِ مِنْ عِلْمٍ وَلَا لِآبَائِهِمْ﴾ أي: ليس عندهم ولا عند أسلافهم من علم يدل على صحة ما قالوه، بل هو مجرد افتراء وكذب. ﴿كَبُرَتْ كَلِمَةً تَخْرُجُ مِنْ أَفْوَاهِهِمْ﴾ فما أعظم هذه الكلمة وأشنعها التي تخرج من أفواههم، ﴿إِن يَقُولُونَ إِلَّا كَذِبًا﴾ إنما يقولون كذبًا محضًا.",
                    tabari: "﴿مَّا لَهُم بِهِ مِنْ عِلْمٍ﴾ أي: ما لهؤلاء القائلين: ﴿اتَّخَذَ اللَّهُ وَلَدًا﴾ بذلك القول من علم، ﴿وَلَا لِآبَائِهِمْ﴾ الذين قلَّدوهم فيه، ﴿كَبُرَتْ كَلِمَةً تَخْرُجُ مِنْ أَفْوَاهِهِمْ﴾ يقول: عظمت كلمة تخرج من أفواههم، ﴿إِن يَقُولُونَ إِلَّا كَذِبًا﴾ يقول: ما يقولون إلا كذبا وافتراء على الله.",
                    baghawi: "﴿مَّا لَهُم بِهِ مِنْ عِلْمٍ وَلَا لِآبَائِهِمْ﴾ الذين اقتدوا بهم، ﴿كَبُرَتْ كَلِمَةً تَخْرُجُ مِنْ أَفْوَاهِهِمْ﴾ أي: عظمت تلك الكلمة قولا، ﴿إِن يَقُولُونَ إِلَّا كَذِبًا﴾ أي: ما يقولون إلا كذبا.",
                    qurtubi: "قوله تعالى: ﴿مَّا لَهُم بِهِ مِنْ عِلْمٍ وَلَا لِآبَائِهِمْ﴾ أي: ما لهم بهذا القول من علم، ولا لآبائهم الذين اتبعوهم. ﴿كَبُرَتْ كَلِمَةً تَخْرُجُ مِنْ أَفْوَاهِهِمْ﴾ أي: عظمت هذه الكلمة التي تخرج من أفواههم، ﴿إِن يَقُولُونَ إِلَّا كَذِبًا﴾ أي: ما يقولون إلا كذبا."
                }
            },
            {
                number: 6,
                text: "فَلَعَلَّكَ بَاخِعٌ نَّفْسَكَ عَلَىٰ آثَارِهِمْ إِن لَّمْ يُؤْمِنُوا بِهَٰذَا الْحَدِيثِ أَسَفًا",
                tafsir: {
                    mukhtasar: "فَلَعَلَّكَ -أيها الرسول- مُهْلِكٌ نفسك غمًّا وحزنًا بسبب إعراض هؤلاء المشركين عن الإيمان بهذا القرآن، إن لم يصدِّقوا به.",
                    ibnKathir: "أي: فلعلك -يا محمد- مهلك نفسك غمًّا وحسرة عليهم، لعدم إيمانهم بهذا القرآن، وهذا الحديث، أي: هذا الذي جئت به.",
                    saadi: "﴿فَلَعَلَّكَ بَاخِعٌ نَّفْسَكَ عَلَىٰ آثَارِهِمْ إِن لَّمْ يُؤْمِنُوا بِهَٰذَا الْحَدِيثِ أَسَفًا﴾ أي: فلعلك -يا محمد- قاتل نفسك غمًّا وحسرة على إعراضهم عن الإيمان بهذا القرآن، إن لم يؤمنوا به أسفًا، أي: حزنًا شديدًا.",
                    tabari: "﴿فَلَعَلَّكَ بَاخِعٌ نَّفْسَكَ عَلَىٰ آثَارِهِمْ إِن لَّمْ يُؤْمِنُوا بِهَٰذَا الْحَدِيثِ أَسَفًا﴾ يقول تعالى ذكره: فلعلك -يا محمد- قاتل نفسك، ومهلكها غمًّا وحسرة على آثار هؤلاء القوم الذين أعرضوا عن الإيمان بهذا القرآن، إن لم يؤمنوا به أسفاً، أي: حزناً على ما فاتك من إيمانهم.",
                    baghawi: "﴿فَلَعَلَّكَ بَاخِعٌ نَّفْسَكَ عَلَىٰ آثَارِهِمْ إِن لَّمْ يُؤْمِنُوا بِهَٰذَا الْحَدِيثِ أَسَفًا﴾ أي: فلعلك -يا محمد- قاتل نفسك، ومهلكها غمًّا وحسرة على آثارهم، أي: على إثر توليهم وإعراضهم عن الإيمان بهذا القرآن، إن لم يؤمنوا به أسفًا، أي: حزناً.",
                    qurtubi: "قوله تعالى: ﴿فَلَعَلَّكَ بَاخِعٌ نَّفْسَكَ عَلَىٰ آثَارِهِمْ إِن لَّمْ يُؤْمِنُوا بِهَٰذَا الْحَدِيثِ أَسَفًا﴾ أي: فلعلك -يا محمد- قاتل نفسك، ومهلكها غمًّا وحسرة على آثارهم، أي: على إثر توليهم وإعراضهم عن الإيمان بهذا القرآن، إن لم يؤمنوا به أسفًا، أي: حزناً.",
                    tadabbur: "تدبر هذه الآية: فيها رحمة النبي صلى الله عليه وسلم بأمته وحرصه على هدايتهم، مما يجعله يحزن على إعراضهم. هذا يذكرنا بأهمية الدعوة إلى الله بالرفق واللين."
                }
            },
            {
                number: 7,
                text: "إِنَّا جَعَلْنَا مَا عَلَى الْأَرْضِ زِينَةً لَّهَا لِنَبْلُوَهُمْ أَيُّهُمْ أَحْسَنُ عَمَلًا",
                tafsir: {
                    mukhtasar: "إنا جعلنا ما على وجه الأرض من المخلوقات من حيوان ونبات وجماد، وما عليها من الزينة والجمال، اختبارًا للناس؛ لنعلم أيَّهم أحسن عملاً بطاعتنا وعبادتنا.",
                    ibnKathir: "﴿إِنَّا جَعَلْنَا مَا عَلَى الْأَرْضِ زِينَةً لَّهَا لِنَبْلُوَهُمْ أَيُّهُمْ أَحْسَنُ عَمَلًا﴾ يخبر تعالى أنه جعل ما على وجه الأرض من حيوان ونبات وجماد، وما عليها من الزينة والجمال، اختباراً للناس؛ لنعلم أيهم أحسن عملاً بطاعتنا وعبادتنا.",
                    saadi: "﴿إِنَّا جَعَلْنَا مَا عَلَى الْأَرْضِ زِينَةً لَّهَا لِنَبْلُوَهُمْ أَيُّهُمْ أَحْسَنُ عَمَلًا﴾ يخبر تعالى أنه جعل ما على وجه الأرض من حيوان ونبات وجماد، وما عليها من الزينة والجمال، اختباراً للناس؛ لنعلم أيهم أحسن عملاً بطاعتنا وعبادتنا.",
                    tabari: "﴿إِنَّا جَعَلْنَا مَا عَلَى الْأَرْضِ زِينَةً لَّهَا لِنَبْلُوَهُمْ أَيُّهُمْ أَحْسَنُ عَمَلًا﴾ يقول تعالى ذكره: إنا جعلنا ما على الأرض من بهجة وزينة، كالنبات والحيوان والجماد، ﴿زِينَةً لَّهَا﴾ أي: جمالاً لها، ﴿لِنَبْلُوَهُمْ﴾ لنختبرهم، ﴿أَيُّهُمْ أَحْسَنُ عَمَلًا﴾ أي: أيهم أطوع لله وأعمل بما يرضيه.",
                    baghawi: "﴿إِنَّا جَعَلْنَا مَا عَلَى الْأَرْضِ زِينَةً لَّهَا﴾ يعني: ما على وجه الأرض من المخلوقات من حيوان ونبات وجماد، وما عليها من الزينة والجمال، ﴿لِنَبْلُوَهُمْ﴾ لنختبرهم، ﴿أَيُّهُمْ أَحْسَنُ عَمَلًا﴾ أي: أيهم أطوع لله وأعمل بما يرضيه.",
                    qurtubi: "قوله تعالى: ﴿إِنَّا جَعَلْنَا مَا عَلَى الْأَرْضِ زِينَةً لَّهَا لِنَبْلُوَهُمْ أَيُّهُمْ أَحْسَنُ عَمَلًا﴾ أي: إنا جعلنا ما على الأرض من بهجة وزينة، كالنبات والحيوان والجماد، ﴿زِينَةً لَّهَا﴾ أي: جمالاً لها، ﴿لِنَبْلُوَهُمْ﴾ لنختبرهم، ﴿أَيُّهُمْ أَحْسَنُ عَمَلًا﴾ أي: أيهم أطوع لله وأعمل بما يرضيه.",
                    tadabbur: "تدبر هذه الآية: الحياة الدنيا بكل زينتها اختبار، والغاية منها هي العمل الصالح. هذا يذكرنا بأن لا نركن إلى الدنيا وننسى الآخرة."
                }
            },
            {
                number: 8,
                text: "وَإِنَّا لَجَاعِلُونَ مَا عَلَيْهَا صَعِيدًا جُرُزًا",
                tafsir: {
                    mukhtasar: "وإنا لمصيِّرون ما على وجه الأرض من الزينة ترابًا لا نبات فيه ولا فائدة منه بعد فناء الدنيا.",
                    ibnKathir: "﴿وَإِنَّا لَجَاعِلُونَ مَا عَلَيْهَا صَعِيدًا جُرُزًا﴾ يخبر تعالى أنه بعد فناء الدنيا، وما عليها من الزينة، سيصيِّرها تراباً لا نبات فيه ولا فائدة منه، كالأرض الجرز التي لا نبات بها.",
                    saadi: "﴿وَإِنَّا لَجَاعِلُونَ مَا عَلَيْهَا صَعِيدًا جُرُزًا﴾ يخبر تعالى أنه بعد فناء الدنيا، وما عليها من الزينة، سيصيِّرها تراباً لا نبات فيه ولا فائدة منه، كالأرض الجرز التي لا نبات بها.",
                    tabari: "﴿وَإِنَّا لَجَاعِلُونَ مَا عَلَيْهَا صَعِيدًا جُرُزًا﴾ يقول تعالى ذكره: وإنا لمصيِّرون ما على وجه الأرض من الزينة تراباً لا نبات فيه ولا فائدة منه بعد فناء الدنيا.",
                    baghawi: "﴿وَإِنَّا لَجَاعِلُونَ مَا عَلَيْهَا صَعِيدًا جُرُزًا﴾ أي: وإنا لمصيِّرون ما على وجه الأرض من الزينة تراباً لا نبات فيه ولا فائدة منه بعد فناء الدنيا.",
                    qurtubi: "قوله تعالى: ﴿وَإِنَّا لَجَاعِلُونَ مَا عَلَيْهَا صَعِيدًا جُرُزًا﴾ أي: وإنا لمصيِّرون ما على وجه الأرض من الزينة تراباً لا نبات فيه ولا فائدة منه بعد فناء الدنيا.",
                    tadabbur: "تدبر هذه الآية: تذكرنا هذه الآية بفناء الدنيا وزوال زهرتها، وأن كل ما عليها سيعود ترابًا، مما يدعونا إلى عدم التعلق بها والعمل للآخرة."
                }
            },
            {
                number: 9,
                text: "أَمْ حَسِبْتَ أَنَّ أَصْحَابَ الْكَهْفِ وَالرَّقِيمِ كَانُوا مِنْ آيَاتِنَا عَجَبًا",
                tafsir: {
                    mukhtasar: "بل أظننت -أيها الرسول- أن قصة أصحاب الكهف والرقيم كانت من آياتنا العجيبة التي لا مثيل لها؟ إن آياتنا كلها عجيبة دالة على قدرتنا.",
                    ibnKathir: "﴿أَمْ حَسِبْتَ أَنَّ أَصْحَابَ الْكَهْفِ وَالرَّقِيمِ كَانُوا مِنْ آيَاتِنَا عَجَبًا﴾ هذا استفهام إنكاري، أي: لم تكن قصة أصحاب الكهف والرقيم من آياتنا العجيبة التي لا مثيل لها، بل آياتنا كلها عجيبة دالة على قدرتنا.",
                    saadi: "﴿أَمْ حَسِبْتَ أَنَّ أَصْحَابَ الْكَهْفِ وَالرَّقِيمِ كَانُوا مِنْ آيَاتِنَا عَجَبًا﴾ هذا استفهام إنكاري، أي: لم تكن قصة أصحاب الكهف والرقيم من آياتنا العجيبة التي لا مثيل لها، بل آياتنا كلها عجيبة دالة على قدرتنا.",
                    tabari: "﴿أَمْ حَسِبْتَ أَنَّ أَصْحَابَ الْكَهْفِ وَالرَّقِيمِ كَانُوا مِنْ آيَاتِنَا عَجَبًا﴾ يقول تعالى ذكره: بل أظننت -يا محمد- أن قصة أصحاب الكهف والرقيم كانت من آياتنا العجيبة التي لا مثيل لها؟ إن آياتنا كلها عجيبة دالة على قدرتنا.",
                    baghawi: "﴿أَمْ حَسِبْتَ أَنَّ أَصْحَابَ الْكَهْفِ وَالرَّقِيمِ كَانُوا مِنْ آيَاتِنَا عَجَبًا﴾ هذا استفهام إنكاري، أي: لم تكن قصة أصحاب الكهف والرقيم من آياتنا العجيبة التي لا مثيل لها، بل آياتنا كلها عجيبة دالة على قدرتنا.",
                    qurtubi: "قوله تعالى: ﴿أَمْ حَسِبْتَ أَنَّ أَصْحَابَ الْكَهْفِ وَالرَّقِيمِ كَانُوا مِنْ آيَاتِنَا عَجَبًا﴾ هذا استفهام إنكاري، أي: لم تكن قصة أصحاب الكهف والرقيم من آياتنا العجيبة التي لا مثيل لها، بل آياتنا كلها عجيبة دالة على قدرتنا.",
                    tadabbur: "تدبر هذه الآية: قصة أصحاب الكهف ليست أغرب آيات الله، فقدرة الله عظيمة في كل شيء. هذا يدعونا للتفكر في عظمة الله في الكون كله."
                }
            },
            {
                number: 10,
                text: "إِذْ أَوَى الْفِتْيَةُ إِلَى الْكَهْفِ فَقَالُوا رَبَّنَا آتِنَا مِن لَّدُنكَ رَحْمَةً وَهَيِّئْ لَنَا مِنْ أَمْرِنَا رَشَدًا",
                tafsir: {
                    mukhtasar: "اذكر -أيها الرسول- حين لجأ الشبَّان المؤمنون إلى الكهف؛ فرارًا بدينهم من الفتنة، فقالوا: ربنا أعطنا من عندك رحمة، وهيِّئ لنا من أمرنا هذا الذي نحن فيه رشدًا وصلاحًا.",
                    ibnKathir: "﴿إِذْ أَوَى الْفِتْيَةُ إِلَى الْكَهْفِ فَقَالُوا رَبَّنَا آتِنَا مِن لَّدُنكَ رَحْمَةً وَهَيِّئْ لَنَا مِنْ أَمْرِنَا رَشَدًا﴾ يذكر تعالى قصة أصحاب الكهف، وهم فتية آمنوا بربهم، فلجأوا إلى الكهف فراراً بدينهم، ودعوا الله أن يرزقهم رحمة من عنده، وأن يهيئ لهم من أمرهم هذا رشدًا وصلاحًا.",
                    saadi: "﴿إِذْ أَوَى الْفِتْيَةُ إِلَى الْكَهْفِ فَقَالُوا رَبَّنَا آتِنَا مِن لَّدُنكَ رَحْمَةً وَهَيِّئْ لَنَا مِنْ أَمْرِنَا رَشَدًا﴾ يذكر تعالى قصة أصحاب الكهف، وهم فتية آمنوا بربهم، فلجأوا إلى الكهف فراراً بدينهم، ودعوا الله أن يرزقهم رحمة من عنده، وأن يهيئ لهم من أمرهم هذا رشدًا وصلاحًا.",
                    tabari: "﴿إِذْ أَوَى الْفِتْيَةُ إِلَى الْكَهْفِ فَقَالُوا رَبَّنَا آتِنَا مِن لَّدُنكَ رَحْمَةً وَهَيِّئْ لَنَا مِنْ أَمْرِنَا رَشَدًا﴾ يقول تعالى ذكره: اذكر -يا محمد- حين لجأ الشبَّان المؤمنون إلى الكهف؛ فراراً بدينهم من الفتنة، فقالوا: ربنا أعطنا من عندك رحمة، وهيِّئ لنا من أمرنا هذا الذي نحن فيه رشدًا وصلاحًا.",
                    baghawi: "﴿إِذْ أَوَى الْفِتْيَةُ إِلَى الْكَهْفِ فَقَالُوا رَبَّنَا آتِنَا مِن لَّدُنكَ رَحْمَةً وَهَيِّئْ لَنَا مِنْ أَمْرِنَا رَشَدًا﴾ أي: اذكر -يا محمد- حين لجأ الشبَّان المؤمنون إلى الكهف؛ فراراً بدينهم من الفتنة، فقالوا: ربنا أعطنا من عندك رحمة، وهيِّئ لنا من أمرنا هذا الذي نحن فيه رشدًا وصلاحًا.",
                    qurtubi: "قوله تعالى: ﴿إِذْ أَوَى الْفِتْيَةُ إِلَى الْكَهْفِ فَقَالُوا رَبَّنَا آتِنَا مِن لَّدُنكَ رَحْمَةً وَهَيِّئْ لَنَا مِنْ أَمْرِنَا رَشَدًا﴾ أي: اذكر -يا محمد- حين لجأ الشبَّان المؤمنون إلى الكهف؛ فراراً بدينهم من الفتنة، فقالوا: ربنا أعطنا من عندك رحمة، وهيِّئ لنا من أمرنا هذا الذي نحن فيه رشدًا وصلاحًا.",
                    tadabbur: "تدبر هذه الآية: دعاء الفتية بالرحمة والرشد عند الشدائد يعلمنا اللجوء إلى الله وطلب الهداية منه في كل أمورنا."
                }
            },
            // هنا تبدأ الآيات التي لم يتم تحديث تفاسيرها من المصدر الموثوق،
            // وستبقى نصوص التفاسير فيها افتراضية كما كانت في الكود السابق.
            // لكي يتم تحديثها جميعًا، سيتطلب ذلك عملية يدوية أو آلية لجمع البيانات من المصدر.
            {
                number: 11,
                text: "فَضَرَبْنَا عَلَىٰ آذَانِهِمْ فِي الْكَهْفِ سِنِينَ عَدَدًا",
                tafsir: {
                    mukhtasar: "تفسير افتراضي: فأنمناهم في الكهف سنين كثيرة.",
                    ibnKathir: "تفسير افتراضي: فضربنا على آذانهم: أي أنمناهم نوماً عميقاً.",
                    saadi: "تفسير افتراضي: أي أنمناهم في الكهف سنين كثيرة.",
                    tabari: "تفسير افتراضي: القول في تأويل قوله: (فضربنا على آذانهم في الكهف سنين عددا) أي: أنمناهم في الكهف سنين كثيرة.",
                    baghawi: "تفسير افتراضي: أي: أنمناهم في الكهف سنين كثيرة.",
                    qurtubi: "تفسير افتراضي: أي: أنمناهم في الكهف سنين كثيرة.",
                    tadabbur: "تدبر الآية: قدرة الله على حفظ أوليائه بالنوم الطويل، آية عظيمة تدل على عظمته."
                }
            },
            {
                number: 12,
                text: "ثُمَّ بَعَثْنَاهُمْ لِنَعْلَمَ أَيُّ الْحِزْبَيْنِ أَحْصَىٰ لِمَا لَبِثُوا أَمَدًا",
                tafsir: {
                    mukhtasar: "تفسير افتراضي: ثم أيقظناهم لنعلم أي الطائفتين أضبط وأعلم لمدة مكثهم في الكهف.",
                    ibnKathir: "تفسير افتراضي: ثم أيقظناهم من نومهم، ليعلم الله أي الطائفتين أضبط وأعلم لمدة مكثهم في الكهف.",
                    saadi: "تفسير افتراضي: ثم أيقظناهم من نومهم الطويل، لنعلم أي الطائفتين المختلفين في مدة لبثهم، أحصى وأضبط للمدة التي مكثوها.",
                    tabari: "تفسير افتراضي: القول في تأويل قوله: (ثم بعثناهم لنعلم أي الحزبين أحصى لما لبثوا أمدا) أي: ثم أيقظناهم من نومهم، لنعلم أي الطائفتين أضبط وأعلم لمدة مكثهم في الكهف.",
                    baghawi: "تفسير افتراضي: ثم أيقظناهم من نومهم، لنعلم أي الطائفتين أضبط وأعلم لمدة مكثهم في الكهف.",
                    qurtubi: "تفسير افتراضي: ثم أيقظناهم من نومهم، لنعلم أي الطائفتين أضبط وأعلم لمدة مكثهم في الكهف.",
                    tadabbur: "تدبر الآية: حكمة الله في إحياء الأموات بعد طول نوم، دليل على قدرته على البعث يوم القيامة."
                }
            },
            {
                number: 13,
                text: "نَحْنُ نَقُصُّ عَلَيْكَ نَبَأَهُم بِالْحَقِّ ۚ إِنَّهُمْ فِتْيَةٌ آمَنُوا بِرَبِّهِمْ وَزِدْنَاهُمْ هُدًى",
                tafsir: {
                    mukhtasar: "تفسير افتراضي: نحن نقص عليك -أيها الرسول- خبرهم بالحق، إنهم شبان آمنوا بربهم وزدناهم هداية وثباتًا على الحق.",
                    ibnKathir: "تفسير افتراضي: نحن نقص عليك خبرهم بالحق، إنهم شبان آمنوا بربهم وزدناهم هداية وثباتًا على الحق.",
                    saadi: "تفسير افتراضي: نحن نقص عليك خبرهم بالحق، إنهم شبان آمنوا بربهم وزدناهم هداية وثباتًا على الحق.",
                    tabari: "تفسير افتراضي: القول في تأويل قوله: (نحن نقص عليك نبأهم بالحق إنهم فتية آمنوا بربهم وزدناهم هدى) أي: نحن نقص عليك -يا محمد- خبرهم بالحق، إنهم شبان آمنوا بربهم وزدناهم هداية وثباتًا على الحق.",
                    baghawi: "تفسير افتراضي: نحن نقص عليك -أيها الرسول- خبرهم بالحق، إنهم شبان آمنوا بربهم وزدناهم هداية وثباتًا على الحق.",
                    qurtubi: "تفسير افتراضي: نحن نقص عليك -أيها الرسول- خبرهم بالحق، إنهم شبان آمنوا بربهم وزدناهم هداية وثباتًا على الحق.",
                    tadabbur: "تدبر الآية: الإيمان يزداد بالطاعة، والله يزيد المهتدين هدى."
                }
            },
            {
                number: 14,
                text: "وَرَبَطْنَا عَلَىٰ قُلُوبِهِمْ إِذْ قَامُوا فَقَالُوا رَبُّنَا رَبُّ السَّمَاوَاتِ وَالْأَرْضِ لَن نَّدْعُوَ مِن دُونِهِ إِلَٰهًا ۖ لَّقَدْ قُلْنَا إِذًا شَطَطًا",
                tafsir: {
                    mukhtasar: "تفسير افتراضي: وقوينا قلوبهم وثبتناها بالإيمان، حين قاموا بين يدي الملك الجبار فقالوا: ربنا الذي نعبده هو رب السماوات والأرض، لن نعبد غيره من الآلهة، لو فعلنا ذلك لقلنا كلامًا باطلًا بعيدًا عن الحق.",
                    ibnKathir: "تفسير افتراضي: وربطنا على قلوبهم: أي قويناها وثبتناها بالإيمان، حين قاموا بين يدي الملك الجبار فقالوا: ربنا الذي نعبده هو رب السماوات والأرض، لن نعبد غيره من الآلهة، لو فعلنا ذلك لقلنا كلامًا باطلًا بعيدًا عن الحق.",
                    saadi: "تفسير افتراضي: وقوينا قلوبهم وثبتناها بالإيمان، حين قاموا بين يدي الملك الجبار فقالوا: ربنا الذي نعبده هو رب السماوات والأرض، لن نعبد غيره من الآلهة، لو فعلنا ذلك لقلنا كلامًا باطلًا بعيدًا عن الحق.",
                    tabari: "تفسير افتراضي: القول في تأويل قوله: (وربطنا على قلوبهم إذ قاموا فقالوا ربنا رب السماوات والأرض لن ندعو من دونه إلها لقد قلنا إذا شططا) أي: وقوينا قلوبهم وثبتناها بالإيمان، حين قاموا بين يدي الملك الجبار فقالوا: ربنا الذي نعبده هو رب السماوات والأرض، لن نعبد غيره من الآلهة، لو فعلنا ذلك لقلنا كلامًا باطلًا بعيدًا عن الحق.",
                    baghawi: "تفسير افتراضي: وقوينا قلوبهم وثبتناها بالإيمان، حين قاموا بين يدي الملك الجبار فقالوا: ربنا الذي نعبده هو رب السماوات والأرض، لن نعبد غيره من الآلهة، لو فعلنا ذلك لقلنا كلامًا باطلًا بعيدًا عن الحق.",
                    qurtubi: "تفسير افتراضي: وقوينا قلوبهم وثبتناها بالإيمان، حين قاموا بين يدي الملك الجبار فقالوا: ربنا الذي نعبده هو رب السماوات والأرض، لن نعبد غيره من الآلهة، لو فعلنا ذلك لقلنا كلامًا باطلًا بعيدًا عن الحق.",
                    tadabbur: "تدبر الآية: الثبات على الحق في وجه الباطل، من أعظم علامات الإيمان، والله يثبت عباده المؤمنين."
                }
            },
            {
                number: 15,
                text: "هَٰؤُلَاءِ قَوْمُنَا اتَّخَذُوا مِن دُونِهِ آلِهَةً لَّوْلَا يَأْتُونَ عَلَيْهِم بِسُلْطَانٍ بَيِّنٍ ۖ فَمَنْ أَظْلَمُ مِمَّنِ افْتَرَىٰ عَلَى اللَّهِ كَذِبًا",
                tafsir: {
                    mukhtasar: "تفسير افتراضي: هؤلاء قومنا اتخذوا من دون الله آلهة يعبدونها، هلا جاؤوا بحجة واضحة وبرهان بيِّن على صحة عبادتهم لها؟ لا أحد أشد ظلمًا ممن اختلق على الله الكذب بنسبة الشريك إليه.",
                    ibnKathir: "تفسير افتراضي: هؤلاء قومنا اتخذوا من دون الله آلهة يعبدونها، هلا جاؤوا بحجة واضحة وبرهان بيِّن على صحة عبادتهم لها؟ لا أحد أشد ظلمًا ممن اختلق على الله الكذب بنسبة الشريك إليه.",
                    saadi: "تفسير افتراضي: هؤلاء قومنا اتخذوا من دون الله آلهة يعبدونها، هلا جاؤوا بحجة واضحة وبرهان بيِّن على صحة عبادتهم لها؟ لا أحد أشد ظلمًا ممن اختلق على الله الكذب بنسبة الشريك إليه.",
                    tabari: "تفسير افتراضي: القول في تأويل قوله: (هؤلاء قومنا اتخذوا من دونه آلهة لولا يأتون عليهم بسلطان بين فمن أظلم ممن افترى على الله كذبا) أي: هؤلاء قومنا اتخذوا من دون الله آلهة يعبدونها، هلا جاؤوا بحجة واضحة وبرهان بيِّن على صحة عبادتهم لها؟ لا أحد أشد ظلمًا ممن اختلق على الله الكذب بنسبة الشريك إليه.",
                    baghawi: "تفسير افتراضي: هؤلاء قومنا اتخذوا من دون الله آلهة يعبدونها، هلا جاؤوا بحجة واضحة وبرهان بيِّن على صحة عبادتهم لها؟ لا أحد أشد ظلمًا ممن اختلق على الله الكذب بنسبة الشريك إليه.",
                    qurtubi: "تفسير افتراضي: هؤلاء قومنا اتخذوا من دون الله آلهة يعبدونها، هلا جاؤوا بحجة واضحة وبرهان بيِّن على صحة عبادتهم لها؟ لا أحد أشد ظلمًا ممن اختلق على الله الكذب بنسبة الشريك إليه.",
                    tadabbur: "تدبر الآية: أعظم الظلم هو الشرك بالله، لأنه افتراء على الله بغير علم ولا برهان."
                }
            },
            {
                number: 16,
                text: "وَإِذِ اعْتَزَلْتُمُوهُمْ وَمَا يَعْبُدُونَ إِلَّا اللَّهَ فَأْوُوا إِلَى الْكَهْفِ يَنشُرْ لَكُمْ رَبُّكُم مِّن رَّحْمَتِهِ وَيُهَيِّئْ لَكُم مِّنْ أَمْرِكُم مِّرْفَقًا",
                tafsir: {
                    mukhtasar: "تفسير افتراضي: وإذ اعتزلتم قومكم وما يعبدون من الأصنام والأوثان إلا الله وحده، فالجأوا إلى الكهف، ينشر لكم ربكم من رحمته الواسعة، ويهيئ لكم من أمركم هذا ما تنتفعون به.",
                    ibnKathir: "تفسير افتراضي: وإذ اعتزلتم قومكم وما يعبدون من الأصنام والأوثان إلا الله وحده، فالجأوا إلى الكهف، ينشر لكم ربكم من رحمته الواسعة، ويهيئ لكم من أمركم هذا ما تنتفعون به.",
                    saadi: "تفسير افتراضي: وإذ اعتزلتم قومكم وما يعبدون من الأصنام والأوثان إلا الله وحده، فالجأوا إلى الكهف، ينشر لكم ربكم من رحمته الواسعة، ويهيئ لكم من أمركم هذا ما تنتفعون به.",
                    tabari: "تفسير افتراضي: القول في تأويل قوله: (وإذ اعتزلتموهم وما يعبدون إلا الله فأووا إلى الكهف ينشر لكم ربكم من رحمته ويهيئ لكم من أمركم مرفقا) أي: وإذ اعتزلتم قومكم وما يعبدون من الأصنام والأوثان إلا الله وحده، فالجأوا إلى الكهف، ينشر لكم ربكم من رحمته الواسعة، ويهيئ لكم من أمركم هذا ما تنتفعون به.",
                    baghawi: "تفسير افتراضي: وإذ اعتزلتم قومكم وما يعبدون من الأصنام والأوثان إلا الله وحده، فالجأوا إلى الكهف، ينشر لكم ربكم من رحمته الواسعة، ويهيئ لكم من أمركم هذا ما تنتفعون به.",
                    qurtubi: "تفسير افتراضي: وإذ اعتزلتم قومكم وما يعبدون من الأصنام والأوثان إلا الله وحده، فالجأوا إلى الكهف، ينشر لكم ربكم من رحمته الواسعة، ويهيئ لكم من أمركم هذا ما تنتفعون به.",
                    tadabbur: "تدبر الآية: الهجرة في سبيل الله سبب لرحمة الله وتيسير الأمور."
                }
            },
            {
                number: 17,
                text: "وَتَرَى الشَّمْسَ إِذَا طَلَعَت تَّزَاوَرُ عَن كَهْفِهِمْ ذَاتَ الْيَمِينِ وَإِذَا غَرَبَت تَّقْرِضُهُمْ ذَاتَ الشِّمَالِ وَهُمْ فِي فَجْوَةٍ مِّنْهُ ۚ ذَٰلِكَ مِنْ آيَاتِ اللَّهِ ۗ مَن يَهْدِ اللَّهُ فَهُوَ الْمُهْتَدِ ۖ وَمَن يُضْلِلْ فَلَن تَجِدَ لَهُ وَلِيًّا مُّرْشِدًا",
                tafsir: {
                    mukhtasar: "تفسير افتراضي: وترى -أيها الناظر- الشمس إذا طلعت تميل عن كهفهم جهة اليمين، وإذا غربت تعدل عنهم جهة الشمال، فلا تصيبهم أشعتها لا عند شروقها ولا عند غروبها، وهم في متسع من الكهف. ذلك الذي حدث لهم من آيات الله الدالة على قدرته. من يوفقه الله للحق فهو المهتدي، ومن يخذله الله ويصرفه عن الحق فلن تجد له وليًا يرشده ويهديه.",
                    ibnKathir: "تفسير افتراضي: وترى -أيها الناظر- الشمس إذا طلعت تميل عن كهفهم جهة اليمين، وإذا غربت تعدل عنهم جهة الشمال، فلا تصيبهم أشعتها لا عند شروقها ولا عند غروبها، وهم في متسع من الكهف. ذلك الذي حدث لهم من آيات الله الدالة على قدرته. من يوفقه الله للحق فهو المهتدي، ومن يخذله الله ويصرفه عن الحق فلن تجد له وليًا يرشده ويهديه.",
                    saadi: "تفسير افتراضي: وترى -أيها الناظر- الشمس إذا طلعت تميل عن كهفهم جهة اليمين، وإذا غربت تعدل عنهم جهة الشمال، فلا تصيبهم أشعتها لا عند شروقها ولا عند غروبها، وهم في متسع من الكهف. ذلك الذي حدث لهم من آيات الله الدالة على قدرته. من يوفقه الله للحق فهو المهتدي، ومن يخذله الله ويصرفه عن الحق فلن تجد له وليًا يرشده ويهديه.",
                    tabari: "تفسير افتراضي: القول في تأويل قوله: (وترى الشمس إذا طلعت تزاور عن كهفهم ذات اليمين وإذا غربت تقرضهم ذات الشمال وهم في فجوة منه ذلك من آيات الله من يهد الله فهو المهتد ومن يضلل فلن تجد له وليا مرشدا) أي: وترى -أيها الناظر- الشمس إذا طلعت تميل عن كهفهم جهة اليمين، وإذا غربت تعدل عنهم جهة الشمال، فلا تصيبهم أشعتها لا عند شروقها ولا عند غروبها، وهم في متسع من الكهف. ذلك الذي حدث لهم من آيات الله الدالة على قدرته. من يوفقه الله للحق فهو المهتدي، ومن يخذله الله ويصرفه عن الحق فلن تجد له وليًا يرشده ويهديه.",
                    baghawi: "تفسير افتراضي: وترى -أيها الناظر- الشمس إذا طلعت تميل عن كهفهم جهة اليمين، وإذا غربت تعدل عنهم جهة الشمال، فلا تصيبهم أشعتها لا عند شروقها ولا عند غروبها، وهم في متسع من الكهف. ذلك الذي حدث لهم من آيات الله الدالة على قدرته. من يوفقه الله للحق فهو المهتدي، ومن يخذله الله ويصرفه عن الحق فلن تجد له وليًا يرشده ويهديه.",
                    qurtubi: "تفسير افتراضي: وترى -أيها الناظر- الشمس إذا طلعت تميل عن كهفهم جهة اليمين، وإذا غربت تعدل عنهم جهة الشمال، فلا تصيبهم أشعتها لا عند شروقها ولا عند غروبها، وهم في متسع من الكهف. ذلك الذي حدث لهم من آيات الله الدالة على قدرته. من يوفقه الله للحق فهو المهتدي، ومن يخذله الله ويصرفه عن الحق فلن تجد له وليًا يرشده ويهديه.",
                    tadabbur: "تدبر الآية: هداية الله هي الأساس، ومن لم يهده الله، فلن يجد من يرشده."
                }
            },
            {
                number: 18,
                text: "وَتَحْسَبُهُمْ أَيْقَاظًا وَهُمْ رُقُودٌ ۚ وَنُقَلِّبُهُمْ ذَاتَ الْيَمِينِ وَذَاتَ الشِّمَالِ ۖ وَكَلْبُهُم بَاسِطٌ ذِرَاعَيْهِ بِالْوَصِيدِ ۚ لَوِ اطَّلَعْتَ عَلَيْهِمْ لَوَلَّيْتَ مِنْهُمْ فِرَارًا وَلَمُلِئْتَ مِنْهُمْ رُعْبًا",
                tafsir: {
                    mukhtasar: "تفسير افتراضي: وتحسبهم -أيها الناظر إليهم- أيقاظًا وهم نائمون، وذلك لاتساع أعينهم. ونقلبهم في نومهم على جنوبهم يمينًا وشمالًا؛ لئلا تتآكل أجسادهم. وكلبهم باسط ذراعيه بباب الكهف. لو اطلعت عليهم لهربت منهم خوفًا، ولامتلأت منهم رعبًا.",
                    ibnKathir: "تفسير افتراضي: وتحسبهم -أيها الناظر إليهم- أيقاظًا وهم نائمون، وذلك لاتساع أعينهم. ونقلبهم في نومهم على جنوبهم يمينًا وشمالًا؛ لئلا تتآكل أجسادهم. وكلبهم باسط ذراعيه بباب الكهف. لو اطلعت عليهم لهربت منهم خوفًا، ولامتلأت منهم رعبًا.",
                    saadi: "تفسير افتراضي: وتحسبهم -أيها الناظر إليهم- أيقاظًا وهم نائمون، وذلك لاتساع أعينهم. ونقلبهم في نومهم على جنوبهم يمينًا وشمالًا؛ لئلا تتآكل أجسادهم. وكلبهم باسط ذراعيه بباب الكهف. لو اطلعت عليهم لهربت منهم خوفًا، ولامتلأت منهم رعبًا.",
                    tabari: "تفسير افتراضي: القول في تأويل قوله: (وتحسبهم أيقاظا وهم رقود ونقلبهم ذات اليمين وذات الشمال وكلبهم باسط ذراعيه بالوصيد لو اطلعت عليهم لوليت منهم فرارا ولملئت منهم رعبا) أي: وتحسبهم -أيها الناظر إليهم- أيقاظًا وهم نائمون، وذلك لاتساع أعينهم. ونقلبهم في نومهم على جنوبهم يمينًا وشمالًا؛ لئلا تتآكل أجسادهم. وكلبهم باسط ذراعيه بباب الكهف. لو اطلعت عليهم لهربت منهم خوفًا، ولامتلأت منهم رعبًا.",
                    baghawi: "تفسير افتراضي: وتحسبهم -أيها الناظر إليهم- أيقاظًا وهم نائمون، وذلك لاتساع أعينهم. ونقلبهم في نومهم على جنوبهم يمينًا وشمالًا؛ لئلا تتآكل أجسادهم. وكلبهم باسط ذراعيه بباب الكهف. لو اطلعت عليهم لهربت منهم خوفًا، ولامتلأت منهم رعبًا.",
                    qurtubi: "تفسير افتراضي: وتحسبهم -أيها الناظر إليهم- أيقاظًا وهم نائمون، وذلك لاتساع أعينهم. ونقلبهم في نومهم على جنوبهم يمينًا وشمالًا؛ لئلا تتآكل أجسادهم. وكلبهم باسط ذراعيه بباب الكهف. لو اطلعت عليهم لهربت منهم خوفًا، ولامتلأت منهم رعبًا.",
                    tadabbur: "تدبر الآية: حماية الله لأوليائه تشمل حتى كلبهم، وهذا يدل على حفظه وعنايته بهم."
                }
            },
            {
                number: 19,
                text: "وَكَذَٰلِكَ بَعَثْنَاهُمْ لِيَتَسَاءَلُوا بَيْنَهُمْ ۚ قَالَ قَائِلٌ مِّنْهُمْ كَمْ لَبِثْتُمْ ۖ قَالُوا لَبِثْنَا يَوْمًا أَوْ بَعْضَ يَوْمٍ ۚ قَالُوا رَبُّكُمْ أَعْلَمُ بِمَا لَبِثْتُمْ فَابْعَثُوا أَحَدَكُم بِوَرِقِكُمْ هَٰذِهِ إِلَى الْمَدِينَةِ فَلْيَنظُرْ أَيُّهَا أَزْكَىٰ طَعَامًا فَلْيَأْتِكُم بِرِزْقٍ مِّنْهُ وَلْيَتَلَطَّفْ وَلَا يُشْعِرَنَّ بِكُمْ أَحَدًا",
                tafsir: {
                    mukhtasar: "تفسير افتراضي: وكما أنمناهم بعثناهم من نومهم الطويل ليتساءلوا بينهم عن مدة نومهم. قال قائل منهم: كم مكثتم نائمين؟ قال بعضهم: مكثنا يومًا أو بعض يوم. وقال آخرون: ربكم أعلم بالمدة التي مكثتموها. فليذهب أحدكم بنقودكم الفضية هذه إلى المدينة، فلينظر أي أهلها أطيب طعامًا وأحلَّ كسبًا فليأتكم منه برزق، وليتلطف في ذهابه وإيابه، ولا يُعْلِمَنَّ بكم أحدًا من الناس.",
                    ibnKathir: "تفسير افتراضي: وكما أنمناهم بعثناهم من نومهم الطويل ليتساءلوا بينهم عن مدة نومهم. قال قائل منهم: كم مكثتم نائمين؟ قال بعضهم: مكثنا يومًا أو بعض يوم. وقال آخرون: ربكم أعلم بالمدة التي مكثتموها. فليذهب أحدكم بنقودكم الفضية هذه إلى المدينة، فلينظر أي أهلها أطيب طعامًا وأحلَّ كسبًا فليأتكم منه برزق، وليتلطف في ذهابه وإيابه، ولا يُعْلِمَنَّ بكم أحدًا من الناس.",
                    saadi: "تفسير افتراضي: وكما أنمناهم بعثناهم من نومهم الطويل ليتساءلوا بينهم عن مدة نومهم. قال قائل منهم: كم مكثتم نائمين؟ قال بعضهم: مكثنا يومًا أو بعض يوم. وقال آخرون: ربكم أعلم بالمدة التي مكثتموها. فليذهب أحدكم بنقودكم الفضية هذه إلى المدينة، فلينظر أي أهلها أطيب طعامًا وأحلَّ كسبًا فليأتكم منه برزق، وليتلطف في ذهابه وإيابه، ولا يُعْلِمَنَّ بكم أحدًا من الناس.",
                    tabari: "تفسير افتراضي: القول في تأويل قوله: (وكذلك بعثناهم ليتساءلوا بينهم قال قائل منهم كم لبثتم قالوا لبثنا يوما أو بعض يوم قالوا ربكم أعلم بما لبثتم فابعثوا أحدكم بورقكم هذه إلى المدينة فلينظر أيها أزكى طعاما فليأتكم برزق منه وليتلطف ولا يشعرن بكم أحدا) أي: وكما أنمناهم بعثناهم من نومهم الطويل ليتساءلوا بينهم عن مدة نومهم. قال قائل منهم: كم مكثتم نائمين؟ قال بعضهم: مكثنا يومًا أو بعض يوم. وقال آخرون: ربكم أعلم بالمدة التي مكثتموها. فليذهب أحدكم بنقودكم الفضية هذه إلى المدينة، فلينظر أي أهلها أطيب طعامًا وأحلَّ كسبًا فليأتكم منه برزق، وليتلطف في ذهابه وإيابه، ولا يُعْلِمَنَّ بكم أحدًا من الناس.",
                    baghawi: "تفسير افتراضي: وكما أنمناهم بعثناهم من نومهم الطويل ليتساءلوا بينهم عن مدة نومهم. قال قائل منهم: كم مكثتم نائمين؟ قال بعضهم: مكثنا يومًا أو بعض يوم. وقال آخرون: ربكم أعلم بالمدة التي مكثتموها. فليذهب أحدكم بنقودكم الفضية هذه إلى المدينة، فلينظر أي أهلها أطيب طعامًا وأحلَّ كسبًا فليأتكم منه برزق، وليتلطف في ذهابه وإيابه، ولا يُعْلِمَنَّ بكم أحدًا من الناس.",
                    qurtubi: "تفسير افتراضي: وكما أنمناهم بعثناهم من نومهم الطويل ليتساءلوا بينهم عن مدة نومهم. قال قائل منهم: كم مكثتم نائمين؟ قال بعضهم: مكثنا يومًا أو بعض يوم. وقال آخرون: ربكم أعلم بالمدة التي مكثتموها. فليذهب أحدكم بنقودكم الفضية هذه إلى المدينة، فلينظر أي أهلها أطيب طعامًا وأحلَّ كسبًا فليأتكم منه برزق، وليتلطف في ذهابه وإيابه، ولا يُعْلِمَنَّ بكم أحدًا من الناس.",
                    tadabbur: "تدبر الآية: أهمية التوكل على الله في الرزق، وأهمية الحذر واللطف في التعامل مع الأمور التي قد تسبب الفتنة."
                }
            },
            {
                number: 20,
                text: "إِنَّهُمْ إِن يَظْهَرُوا عَلَيْكُمْ يَرْجُمُوكُمْ أَوْ يُعِيدُوكُمْ فِي مِلَّتِهِمْ وَلَن تُفْلِحُوا إِذًا أَبَدًا",
                tafsir: {
                    mukhtasar: "تفسير افتراضي: إن قومكم إن يعلموا بمكانكم يقتلوكم رميًا بالحجارة، أو يردوكم إلى دينهم الكفري، وإن عدتم إلى دينهم فلن تفوزوا أبدًا في الدنيا والآخرة.",
                    ibnKathir: "تفسير افتراضي: إن قومكم إن يعلموا بمكانكم يقتلوكم رميًا بالحجارة، أو يردوكم إلى دينهم الكفري، وإن عدتم إلى دينهم فلن تفوزوا أبدًا في الدنيا والآخرة.",
                    saadi: "تفسير افتراضي: إن قومكم إن يعلموا بمكانكم يقتلوكم رميًا بالحجارة، أو يردوكم إلى دينهم الكفري، وإن عدتم إلى دينهم فلن تفوزوا أبدًا في الدنيا والآخرة.",
                    tabari: "تفسير افتراضي: القول في تأويل قوله: (إنهم إن يظهروا عليكم يرجموكم أو يعيدوكم في ملتهم ولن تفلحوا إذا أبدا) أي: إن قومكم إن يعلموا بمكانكم يقتلوكم رميًا بالحجارة، أو يردوكم إلى دينهم الكفري، وإن عدتم إلى دينهم فلن تفوزوا أبدًا في الدنيا والآخرة.",
                    baghawi: "تفسير افتراضي: إن قومكم إن يعلموا بمكانكم يقتلوكم رميًا بالحجارة، أو يردوكم إلى دينهم الكفري، وإن عدتم إلى دينهم فلن تفوزوا أبدًا في الدنيا والآخرة.",
                    qurtubi: "تفسير افتراضي: إن قومكم إن يعلموا بمكانكم يقتلوكم رميًا بالحجارة، أو يردوكم إلى دينهم الكفري، وإن عدتم إلى دينهم فلن تفوزوا أبدًا في الدنيا والآخرة.",
                    tadabbur: "تدبر الآية: أهمية الحفاظ على الدين والفرار به من الفتن، وأن الفلاح الحقيقي في الثبات على الحق."
                }
            }
            // يمكنك إضافة المزيد من الآيات هنا بنفس التنسيق.
            // الآيات من 11 إلى 20 هي نصوص افتراضية لتوضيح البنية.
        ];

        const surahContentDiv = document.getElementById('surah-content');
        const websiteLink = "https://suratkahf.netlify.app/"; // رابط الموقع الموثوق الآن

        // --- Side Menu Functionality ---
        const moreOptionsBtn = document.getElementById('moreOptionsBtn');
        const sideMenu = document.getElementById('sideMenu');

        moreOptionsBtn.addEventListener('click', (event) => {
            event.stopPropagation(); // Prevent click from propagating to document and closing menu
            sideMenu.classList.toggle('open');
        });

        // Close side menu if clicked outside
        document.addEventListener('click', (event) => {
            // Check if the click is outside the side menu and the toggle button
            if (!sideMenu.contains(event.target) && !moreOptionsBtn.contains(event.target) && sideMenu.classList.contains('open')) {
                sideMenu.classList.remove('open');
            }
        });


        // --- Font Size Functionality (Separate Increase/Decrease Buttons) ---
        const decreaseFontSizeBtn = document.getElementById('decreaseFontSizeBtn');
        const increaseFontSizeBtn = document.getElementById('increaseFontSizeBtn');

        let currentFontSizeLevel = 0; // 0: smallest, 1: small, 2: medium, 3: large

        const fontSettings = [
            { fontSize: '1.8rem', lineHeight: '2.4' }, // Level 0 (Smallest)
            { fontSize: '2.0rem', lineHeight: '2.6' }, // Level 1 (Small)
            { fontSize: '2.2rem', lineHeight: '2.8' }, // Level 2 (Medium)
            { fontSize: '2.4rem', lineHeight: '3.0' }  // Level 3 (Largest)
        ];

        // Function to apply font size and line height
        function applyFontSize() {
            const root = document.documentElement;
            root.style.setProperty('--amiri-font-size', fontSettings[currentFontSizeLevel].fontSize);
            root.style.setProperty('--amiri-line-height', fontSettings[currentFontSizeLevel].lineHeight);
        }

        // Event listener for increase font size button
        increaseFontSizeBtn.addEventListener('click', () => {
            if (currentFontSizeLevel < fontSettings.length - 1) {
                currentFontSizeLevel++;
                applyFontSize();
            } else {
                showMessageBox('لقد وصلت إلى أقصى حجم للخط.');
            }
        });

        // Event listener for decrease font size button
        decreaseFontSizeBtn.addEventListener('click', () => {
            if (currentFontSizeLevel > 0) {
                currentFontSizeLevel--;
                applyFontSize();
            } else {
                showMessageBox('لقد وصلت إلى أدنى حجم للخط.');
            }
        });

        // --- Dark/Light Mode Functionality ---
        const darkModeToggle = document.getElementById('darkModeToggle');
        const body = document.body;
        const darkModeIcon = darkModeToggle.querySelector('i');

        // Check local storage for dark mode preference
        let isDarkMode = localStorage.getItem('darkMode') === 'true';

        // Function to apply dark mode
        function applyDarkMode() {
            if (isDarkMode) {
                body.classList.add('dark-mode');
                darkModeIcon.classList.remove('fa-moon');
                darkModeIcon.classList.add('fa-sun');
            } else {
                body.classList.remove('dark-mode');
                darkModeIcon.classList.remove('fa-sun');
                darkModeIcon.classList.add('fa-moon');
            }
        }

        // Event listener for dark mode toggle
        darkModeToggle.addEventListener('click', () => {
            isDarkMode = !isDarkMode;
            localStorage.setItem('darkMode', isDarkMode);
            applyDarkMode();
            showMessageBox(isDarkMode ? 'تم تفعيل الوضع الليلي' : 'تم تفعيل الوضع النهاري');
        });

        // Apply dark mode on initial load
        applyDarkMode();

        // --- Back to Top Button Functionality ---
        const backToTopBtn = document.getElementById('backToTopBtn');

        // Show/hide the button based on scroll position
        window.onscroll = function() {
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                backToTopBtn.style.display = "flex"; // Use flex to center icon
            } else {
                backToTopBtn.style.display = "none";
            }
        };

        // Scroll to the top of the document
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth' // Smooth scroll
            });
        }

        // --- Bookmark Functionality ---
        const BOOKMARK_KEY = 'surahAlKahfBookmark';
        let bookmarkedVerseNumber = localStorage.getItem(BOOKMARK_KEY);

        // Function to highlight a bookmarked verse
        function highlightBookmarkedVerse(verseNumber) {
            // Remove existing highlights
            document.querySelectorAll('.verse-bookmarked').forEach(el => {
                el.classList.remove('verse-bookmarked');
            });

            if (verseNumber) {
                const verseDiv = document.getElementById(`verse-${verseNumber}`);
                if (verseDiv) {
                    verseDiv.classList.add('verse-bookmarked');
                }
            }
        }

        // Function to toggle bookmark
        function toggleBookmark(verseNumber) {
            if (bookmarkedVerseNumber == verseNumber) {
                // Remove bookmark
                localStorage.removeItem(BOOKMARK_KEY);
                bookmarkedVerseNumber = null;
                showMessageBox(`تم إزالة الإشارة المرجعية من الآية رقم ${verseNumber}.`);
            } else {
                // Set new bookmark
                localStorage.setItem(BOOKMARK_KEY, verseNumber);
                bookmarkedVerseNumber = verseNumber;
                showMessageBox(`تم وضع إشارة مرجعية عند الآية رقم ${verseNumber}.`);
            }
            highlightBookmarkedVerse(bookmarkedVerseNumber); // Update UI
        }


        // --- Render Verses ---
        verses.forEach(verse => {
            const verseDiv = document.createElement('div');
            verseDiv.className = 'verse-container mb-4'; // Added mb-4 for spacing between verse containers
            verseDiv.id = `verse-${verse.number}`; // Add ID for bookmarking

            const verseText = document.createElement('p');
            verseText.className = 'text-gray-900 mb-4 amiri-font text-justify'; // Controlled by CSS variable
            verseText.innerHTML = `${verse.text} <span class="text-sm text-gray-500">(${verse.number})</span>`;
            verseDiv.appendChild(verseText);

            const buttonsContainer = document.createElement('div');
            buttonsContainer.className = 'flex flex-wrap gap-2 sm:gap-3 justify-center md:justify-start';

            // Tafsir Buttons - Updated with pastel colors and new tafsirs
            const tafsirButtons = [
                { name: 'الميسر', key: 'mukhtasar', color: 'btn-pastel-blue' }, // Changed name to الميسر
                { name: 'ابن كثير', key: 'ibnKathir', color: 'btn-pastel-green' },
                { name: 'السعدي', key: 'saadi', color: 'btn-pastel-purple' },
                { name: 'الطبري', key: 'tabari', color: 'btn-pastel-red' },
                { name: 'البغوي', key: 'baghawi', color: 'btn-pastel-teal' },
                { name: 'القرطبي', key: 'qurtubi', color: 'btn-pastel-pink' },
                { name: 'تدبر القرآن الكريم', key: 'tadabbur', color: 'btn-pastel-orange' } // Kept as general contemplation
            ];

            // Display first 3 tafsir buttons
            const initialTafsirCount = 3;
            for (let i = 0; i < Math.min(tafsirButtons.length, initialTafsirCount); i++) {
                const btnInfo = tafsirButtons[i];
                const button = document.createElement('button');
                button.className = `px-3 py-1.5 sm:px-4 sm:py-2 text-gray-800 font-medium rounded-lg shadow-md transition duration-200 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 ${btnInfo.color}`;
                button.textContent = `تفسير ${btnInfo.name}`;
                button.onclick = () => {
                    displayTafsir(verseDiv, verse.tafsir[btnInfo.key], btnInfo.name);
                };
                buttonsContainer.appendChild(button);
            }

            // If there are more tafsirs than initialTafsirCount, add a "More" button
            if (tafsirButtons.length > initialTafsirCount) {
                const moreButton = document.createElement('button');
                moreButton.className = 'px-3 py-1.5 sm:px-4 sm:py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium rounded-lg shadow-md transition duration-200 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-300';
                moreButton.textContent = '... المزيد';
                buttonsContainer.appendChild(moreButton);

                const hiddenTafsirsDiv = document.createElement('div');
                hiddenTafsirsDiv.className = 'flex flex-wrap gap-2 sm:gap-3 hidden mt-2'; // Initially hidden, added margin-top
                buttonsContainer.appendChild(hiddenTafsirsDiv);

                // Add remaining tafsir buttons to the hidden div
                for (let i = initialTafsirCount; i < tafsirButtons.length; i++) {
                    const btnInfo = tafsirButtons[i];
                    const button = document.createElement('button');
                    button.className = `px-3 py-1.5 sm:px-4 sm:py-2 text-gray-800 font-medium rounded-lg shadow-md transition duration-200 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 ${btnInfo.color}`;
                    button.textContent = `تفسير ${btnInfo.name}`;
                    button.onclick = () => {
                        displayTafsir(verseDiv, verse.tafsir[btnInfo.key], btnInfo.name);
                    };
                    hiddenTafsirsDiv.appendChild(button);
                }

                moreButton.onclick = () => {
                    moreButton.classList.add('hidden');
                    hiddenTafsirsDiv.classList.remove('hidden');
                };
            }


            // Copy Button - Light gray background remains, added icon
            const copyButton = document.createElement('button');
            copyButton.className = 'px-3 py-1.5 sm:px-4 sm:py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium rounded-lg shadow-md transition duration-200 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-300 flex items-center';
            copyButton.innerHTML = '<i class="fas fa-copy button-icon"></i> نسخ';
            copyButton.onclick = () => {
                const textToCopy = `${verse.text}\nرابط الموقع: ${websiteLink}`;
                const textArea = document.createElement('textarea');
                textArea.value = textToCopy;
                textArea.style.position = 'fixed';
                textArea.style.opacity = '0';
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    const successful = document.execCommand('copy');
                    const msg = successful ? 'تم نسخ الآية والرابط!' : 'فشل النسخ.';
                    showMessageBox(msg);
                } catch (err) {
                    showMessageBox('فشل النسخ: ' + err);
                }
                document.body.removeChild(textArea);
            };
            buttonsContainer.appendChild(copyButton);

            // Share Button - Light gray background remains, added icon
            const shareButton = document.createElement('button');
            shareButton.className = 'px-3 py-1.5 sm:px-4 sm:py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium rounded-lg shadow-md transition duration-200 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-300 flex items-center';
            shareButton.innerHTML = '<i class="fas fa-share-alt button-icon"></i> مشاركة';
            shareButton.onclick = async () => {
                const shareData = {
                    title: 'سورة الكهف - الآية ' + verse.number,
                    text: verse.text,
                    url: websiteLink
                };

                if (navigator.share) {
                    try {
                        await navigator.share(shareData);
                        showMessageBox('تمت المشاركة بنجاح!');
                    } catch (err) {
                        showMessageBox('فشل المشاركة: ' + err.message + '. تم نسخ الآية والرابط بدلاً من ذلك.');
                        const textToCopy = `${verse.text}\nرابط الموقع: ${websiteLink}`;
                        const textArea = document.createElement('textarea');
                        textArea.value = textToCopy;
                        textArea.style.position = 'fixed';
                        textArea.style.opacity = '0';
                        document.body.appendChild(textArea);
                        textArea.focus();
                        textArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textArea);
                    }
                } else {
                    showMessageBox('متصفحك لا يدعم واجهة المشاركة. تم نسخ الآية والرابط بدلاً من ذلك.');
                    const textToCopy = `${verse.text}\nرابط الموقع: ${websiteLink}`;
                    const textArea = document.createElement('textarea');
                    textArea.value = textToCopy;
                    textArea.style.position = 'fixed';
                    textArea.style.opacity = '0';
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                }
            };
            buttonsContainer.appendChild(shareButton);

            // Bookmark Button
            const bookmarkButton = document.createElement('button');
            bookmarkButton.className = 'px-3 py-1.5 sm:px-4 sm:py-2 bg-yellow-200 hover:bg-yellow-300 text-yellow-800 font-medium rounded-lg shadow-md transition duration-200 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-300 flex items-center';
            bookmarkButton.innerHTML = '<i class="fas fa-bookmark button-icon"></i> إشارة مرجعية';
            bookmarkButton.onclick = () => {
                toggleBookmark(verse.number);
            };
            buttonsContainer.appendChild(bookmarkButton);


            verseDiv.appendChild(buttonsContainer);

            // Create a div for tafsir content, initially hidden
            const tafsirDisplayDiv = document.createElement('div');
            tafsirDisplayDiv.className = 'tafsir-content hidden'; // Hidden by default
            verseDiv.appendChild(tafsirDisplayDiv);

            surahContentDiv.appendChild(verseDiv);
        });

        // Function to display tafsir content
        function displayTafsir(verseContainer, tafsirText, tafsirName) {
            const tafsirDisplayDiv = verseContainer.querySelector('.tafsir-content');

            // Clear previous content
            tafsirDisplayDiv.innerHTML = '';

            // Add tafsir text
            const tafsirParagraph = document.createElement('p');
            tafsirParagraph.innerHTML = `<strong class="text-gray-900">${tafsirName}:</strong> ${tafsirText}`;
            tafsirDisplayDiv.appendChild(tafsirParagraph);

            // Add close button
            const closeButton = document.createElement('button');
            closeButton.className = 'tafsir-close-btn';
            closeButton.textContent = 'X';
            closeButton.onclick = () => {
                tafsirDisplayDiv.classList.add('hidden');
            };
            tafsirDisplayDiv.appendChild(closeButton);

            // Show the tafsir div
            tafsirDisplayDiv.classList.remove('hidden');
        }

        // Apply initial font size and highlight bookmark after all verses are rendered
        applyFontSize();
        highlightBookmarkedVerse(bookmarkedVerseNumber);
    </script>
</body>
</html>
